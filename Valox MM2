-- Kill All Button
local KillAllButton = Instance.new("TextButton")
KillAllButton.Size = UDim2.new(1,0,0,30)
KillAllButton.BackgroundColor3 = Color3.fromRGB(200,0,0)
KillAllButton.Text = "Kill All"
KillAllButton.TextScaled = true
KillAllButton.TextColor3 = Color3.new(1,1,1)
KillAllButton.Parent = MainFrame

local killCorner = Instance.new("UICorner")
killCorner.CornerRadius = UDim.new(0,12)
killCorner.Parent = KillAllButton

KillAllButton.MouseButton1Click:Connect(function()
    local knife = LocalPlayer.Character:FindFirstChild("Knife")
    if not knife then return end
    local stab = knife:FindFirstChild("Stab")
    if not stab then return end

    -- Ensure Knife is equipped
    LocalPlayer.Character.Humanoid:EquipTool(knife)

    local endTime = tick() + 3 -- 3 seconds
    while tick() < endTime do
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                -- Move target in front of player
                local targetPos = LocalPlayer.Character.HumanoidRootPart.Position + (LocalPlayer.Character.HumanoidRootPart.CFrame.LookVector * 3)
                player.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos)
                -- Fire knife
                local args = {"Slash"}
                stab:FireServer(unpack(args))
            end
        end
        task.wait(0.1)
    end
end)